FROM golang@sha256:766625f2182dacec4c8774355a65a81a3b73acb0b4287b6a32a8efc185aede2c

WORKDIR /go/src/github.com/ThicoMoura/auth
ENV PATH="go/bin:${PATH}"
ENV CGO_ENABLE=1

RUN apt-get update \
    && go install github.com/go-task/task/v3/cmd/task@latest \
    && go install -tags 'postgresql' github.com/golang-migrate/migrate/v4/cmd/migrate@latest \
    && go install github.com/kyleconroy/sqlc/cmd/sqlc@latest 

CMD ["tail", "-f", "/dev/null"]